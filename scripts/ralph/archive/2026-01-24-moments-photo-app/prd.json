{
  "project": "PhotoSpot",
  "branchName": "ralph/photospot-photo-app",
  "description": "Family photo sharing app with manual face tagging, EXIF metadata extraction, and album sharing",
  "userStories": [
    {
      "id": "US-001",
      "title": "Initialize project structure",
      "description": "As a developer, I need the project scaffolded with Vite, React, TypeScript, Tailwind, Convex, and UploadThing so I can start building features.",
      "acceptanceCriteria": [
        "Vite + React + TypeScript project created with 'npm create vite@latest'",
        "Tailwind CSS configured with tailwind.config.js and postcss.config.js",
        "Convex initialized with 'npx convex dev' and convex/ directory created",
        "UploadThing dependencies installed (uploadthing, @uploadthing/react)",
        "Environment variables documented in .env.example (CONVEX_DEPLOYMENT, UPLOADTHING_SECRET, UPLOADTHING_APP_ID)",
        "Project runs locally with 'npm run dev' without errors",
        "Typecheck passes"
      ],
      "priority": 1,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-002",
      "title": "Define Convex schema for users and albums",
      "description": "As a developer, I need database tables for users, albums, album members, and invites defined so I can store core application data.",
      "acceptanceCriteria": [
        "convex/schema.ts defines 'users' table: id, name, email, avatarUrl (optional), createdAt",
        "convex/schema.ts defines 'albums' table: id, name, description (optional), ownerId, createdAt, shareableLink (optional), isPublic (boolean)",
        "convex/schema.ts defines 'albumMembers' table: albumId, userId, role ('owner' | 'editor' | 'viewer'), invitedAt",
        "convex/schema.ts defines 'albumInvites' table: albumId, email, role, token, expiresAt, acceptedAt (optional)",
        "Schema generates without errors when running 'npx convex dev'",
        "Typecheck passes"
      ],
      "priority": 2,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-003",
      "title": "Define Convex schema for photos, faces, and people",
      "description": "As a developer, I need database tables for photos, faces, and people defined so I can store photo and face tagging data.",
      "acceptanceCriteria": [
        "convex/schema.ts defines 'photos' table: id, albumId, uploaderId, storageId, url, filename, uploadedAt, exifDate (optional), exifLat (optional), exifLng (optional), width (optional), height (optional)",
        "convex/schema.ts defines 'faces' table: id, photoId, x, y, width, height (all as percentages 0-100), personId (optional)",
        "convex/schema.ts defines 'people' table: id, albumId, name, representativeFaceId (optional), createdBy",
        "All foreign key relationships use v.id() type for referential integrity",
        "Schema generates without errors",
        "Typecheck passes"
      ],
      "priority": 3,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-004",
      "title": "Implement email/password authentication backend",
      "description": "As a developer, I need Convex Auth configured with email/password provider so users can create accounts and log in.",
      "acceptanceCriteria": [
        "Convex Auth installed and configured (@convex-dev/auth)",
        "Email/password provider enabled in convex/auth.config.ts",
        "Sign up mutation creates user record with email and hashed password",
        "Login mutation validates credentials and returns session",
        "Session tokens stored and validated correctly",
        "Password minimum length validation (8 characters)",
        "Typecheck passes"
      ],
      "priority": 4,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-005",
      "title": "Create authentication UI components",
      "description": "As a user, I want sign up and login forms so I can access my account.",
      "acceptanceCriteria": [
        "SignUpForm component with email, password, and name fields",
        "LoginForm component with email and password fields",
        "Form validation shows error messages for invalid input",
        "Successful login redirects to /albums page",
        "Logout button in header when authenticated",
        "Session persists across page refreshes",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 5,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-006",
      "title": "Implement Google OAuth",
      "description": "As a user, I want to sign in with Google so I can access the app without creating a new password.",
      "acceptanceCriteria": [
        "Google OAuth provider added to convex/auth.config.ts",
        "GOOGLE_CLIENT_ID and GOOGLE_CLIENT_SECRET env vars documented",
        "'Sign in with Google' button on login/signup pages",
        "OAuth flow creates/links user account with Google profile data",
        "User name and avatar populated from Google profile",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 6,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-007",
      "title": "Implement Apple OAuth",
      "description": "As a user, I want to sign in with Apple so I can use my Apple ID.",
      "acceptanceCriteria": [
        "Apple OAuth provider added to convex/auth.config.ts",
        "Apple OAuth env vars documented (APPLE_CLIENT_ID, APPLE_KEY_ID, APPLE_TEAM_ID, APPLE_PRIVATE_KEY)",
        "'Sign in with Apple' button on login/signup pages",
        "OAuth flow handles Apple's private email relay feature",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 7,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-008",
      "title": "Create album backend mutations",
      "description": "As a developer, I need Convex mutations to create albums and manage membership so the UI can interact with album data.",
      "acceptanceCriteria": [
        "createAlbum mutation: creates album with current user as owner, adds owner to albumMembers",
        "getMyAlbums query: returns all albums where user is owner or member",
        "getAlbum query: returns album details if user has access",
        "updateAlbum mutation: owner can update name/description",
        "deleteAlbum mutation: owner can delete album (cascades to members, invites)",
        "Typecheck passes"
      ],
      "priority": 8,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-009",
      "title": "Create album list and creation UI",
      "description": "As a user, I want to see my albums and create new ones so I can organize my photos.",
      "acceptanceCriteria": [
        "/albums page shows grid of album cards (name, description preview, photo count placeholder)",
        "'Create Album' button opens modal with name (required) and description (optional) fields",
        "Album created successfully adds it to the list in real-time",
        "Empty state shown when user has no albums",
        "Albums sorted by most recently created",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 9,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-010",
      "title": "Create album invitation backend",
      "description": "As a developer, I need mutations to invite users to albums and accept invitations.",
      "acceptanceCriteria": [
        "inviteToAlbum mutation: creates albumInvites record with unique token, role, 7-day expiry",
        "getPendingInvites query: returns pending invites for an album (owner only)",
        "revokeInvite mutation: owner can delete pending invite",
        "acceptInvite mutation: validates token, creates albumMembers record, marks invite as accepted",
        "getInviteByToken query: returns invite details for accept page",
        "Typecheck passes"
      ],
      "priority": 10,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-011",
      "title": "Create album invitation UI",
      "description": "As an album owner, I want to invite people by email so they can access my album.",
      "acceptanceCriteria": [
        "'Invite' button in album settings (visible only to owner)",
        "Invite form with email field and role selector (editor/viewer)",
        "Pending invitations list shows email, role, and revoke button",
        "/invite/[token] page shows album name and 'Accept Invitation' button",
        "Accept redirects to album view after adding membership",
        "Expired/invalid tokens show error message",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 11,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-012",
      "title": "Implement shareable album links",
      "description": "As an album owner, I want to generate a public link so anyone can view my album.",
      "acceptanceCriteria": [
        "generateShareableLink mutation: creates unique shareableLink string on album",
        "disableShareableLink mutation: clears shareableLink field",
        "'Get shareable link' toggle in album settings with copy-to-clipboard button",
        "/shared/[link] page loads album without authentication",
        "Shared view shows photos in grid (read-only, no upload/edit)",
        "Invalid/disabled links show 404 page",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 12,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-013",
      "title": "Implement album member management",
      "description": "As an album owner, I want to view and manage members so I can control access.",
      "acceptanceCriteria": [
        "getAlbumMembers query: returns members with user details (name, email, role, joinedAt)",
        "updateMemberRole mutation: owner can change member role (editor ↔ viewer)",
        "removeMember mutation: owner can remove members (not self)",
        "Members list in album settings showing name, email, role",
        "Role dropdown and remove button for each member",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 13,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-014",
      "title": "Implement photo upload backend",
      "description": "As a developer, I need a photo upload flow that stores files and creates photo records.",
      "acceptanceCriteria": [
        "UploadThing configured with Convex integration for image uploads",
        "generateUploadUrl Convex action returns presigned URL",
        "createPhoto mutation: creates photo record with albumId, uploaderId, storageId, url, filename, uploadedAt",
        "getPhotos query: returns all photos in an album sorted by uploadedAt desc",
        "Only editors and owners can upload (permission check)",
        "Typecheck passes"
      ],
      "priority": 14,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-015",
      "title": "Create photo upload UI",
      "description": "As an album member, I want to upload photos so I can add them to the album.",
      "acceptanceCriteria": [
        "Upload button in album view (visible to editors/owners only)",
        "File picker accepts image types (jpg, png, heic, webp)",
        "Multiple file selection supported",
        "Drag-and-drop zone for bulk upload",
        "Upload progress indicator per file",
        "Photos appear in album grid after upload completes",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 15,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-016",
      "title": "Extract EXIF metadata on upload",
      "description": "As the system, I need to extract EXIF data from photos so users can search by date and location.",
      "acceptanceCriteria": [
        "exifr library installed for client-side EXIF extraction",
        "Extract DateTimeOriginal for capture date (fallback to upload date)",
        "Extract GPSLatitude/GPSLongitude for location",
        "Extract image dimensions (width, height)",
        "EXIF data stored in photo record on creation",
        "Photos without EXIF handled gracefully (null values)",
        "Typecheck passes"
      ],
      "priority": 16,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-017",
      "title": "Create photo grid view",
      "description": "As a user, I want to see photos in a grid layout so I can browse the album visually.",
      "acceptanceCriteria": [
        "Responsive grid layout: 2 cols on mobile, 3-4 on tablet, 5-6 on desktop",
        "Photos displayed as square thumbnails with object-fit: cover",
        "Lazy loading for performance (IntersectionObserver or library)",
        "Click photo to open detail view",
        "Loading skeleton while photos load",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 17,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-018",
      "title": "Create photo lightbox view",
      "description": "As a user, I want to view a photo in full size so I can see details.",
      "acceptanceCriteria": [
        "Lightbox overlay opens when clicking photo in grid",
        "Full-resolution image loads in lightbox",
        "Close button (X) in top-right corner",
        "Click outside image to close",
        "Escape key closes lightbox",
        "Dark semi-transparent backdrop",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 18,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-019",
      "title": "Add lightbox navigation",
      "description": "As a user, I want to navigate between photos in the lightbox so I can browse without closing it.",
      "acceptanceCriteria": [
        "Left/right arrow buttons for previous/next photo",
        "Arrow keys navigate between photos",
        "Navigation wraps around (last → first, first → last)",
        "Current photo index shown (e.g., '3 of 24')",
        "Preload adjacent images for smooth navigation",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 19,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-020",
      "title": "Display photo metadata in lightbox",
      "description": "As a user, I want to see when and where a photo was taken.",
      "acceptanceCriteria": [
        "Metadata panel in lightbox sidebar or overlay",
        "Shows capture date (or 'Uploaded on [date]' if no EXIF)",
        "Shows location as lat/lng coordinates (or 'Unknown location')",
        "Shows uploader name",
        "Shows filename",
        "Panel can be toggled visible/hidden",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 20,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-021",
      "title": "Implement timeline view",
      "description": "As a user, I want to see photos organized by date so I can browse chronologically.",
      "acceptanceCriteria": [
        "Photos grouped by date (using exifDate or uploadedAt)",
        "Date headers as section dividers (e.g., 'January 15, 2024')",
        "Sorted newest-first by default",
        "Toggle button to sort oldest-first",
        "Sort preference persists in URL param",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 21,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-022",
      "title": "Implement photo deletion",
      "description": "As a photo uploader or album owner, I want to delete photos so I can remove unwanted images.",
      "acceptanceCriteria": [
        "deletePhoto mutation: removes photo record and storage file",
        "Cascade deletes associated face records",
        "Only uploader or album owner can delete (permission check)",
        "Delete button in photo lightbox",
        "Confirmation dialog before deletion",
        "Photo removed from grid immediately after deletion",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 22,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-023",
      "title": "Create face tagging backend",
      "description": "As a developer, I need mutations to create and manage face tags on photos.",
      "acceptanceCriteria": [
        "createFace mutation: creates face record with photoId and bounding box (x, y, width, height as 0-100 percentages)",
        "updateFace mutation: assigns personId to face",
        "deleteFace mutation: removes face record",
        "getFaces query: returns all faces for a photo",
        "createPerson mutation: creates person with name in album",
        "getPeople query: returns all people in album with face count",
        "Typecheck passes"
      ],
      "priority": 23,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-024",
      "title": "Create face tagging UI - draw regions",
      "description": "As a user, I want to draw a box around a face so I can identify who is in the photo.",
      "acceptanceCriteria": [
        "'Tag faces' button in photo lightbox enters tagging mode",
        "Click-and-drag draws rectangle overlay on photo",
        "Rectangle displayed with dashed border",
        "Existing face regions shown as overlays",
        "Cancel button exits tagging mode without saving",
        "Bounding box coordinates calculated as percentages",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 24,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-025",
      "title": "Create face tagging UI - assign names",
      "description": "As a user, I want to name a face so I can identify who it is.",
      "acceptanceCriteria": [
        "After drawing box, name input prompt appears",
        "Autocomplete dropdown suggests existing people in album",
        "Can type new name to create new person",
        "Selecting/entering name creates face record linked to person",
        "Face overlay shows person name on hover",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 25,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-026",
      "title": "Create people list view",
      "description": "As a user, I want to see all people tagged in an album so I can browse by person.",
      "acceptanceCriteria": [
        "'People' tab in album navigation",
        "Grid of people cards with representative face as thumbnail",
        "Each card shows person name and photo count",
        "Click person navigates to person detail page",
        "Empty state when no people tagged yet",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 26,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-027",
      "title": "Create person detail page",
      "description": "As a user, I want to see all photos containing a specific person.",
      "acceptanceCriteria": [
        "/albums/[albumId]/people/[personId] shows photos of that person",
        "getPhotosByPerson query: returns photos with faces linked to personId",
        "Same photo grid layout as album view",
        "Person name as page title",
        "Back button returns to people list",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 27,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-028",
      "title": "Implement person name editing",
      "description": "As a user, I want to rename a person so I can fix mistakes.",
      "acceptanceCriteria": [
        "updatePerson mutation: updates person name",
        "Edit button on person detail page",
        "Inline edit or modal for name change",
        "Updated name reflects immediately in UI",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 28,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-029",
      "title": "Implement merge duplicate people",
      "description": "As a user, I want to merge two person entries so I can consolidate duplicates.",
      "acceptanceCriteria": [
        "mergePeople mutation: updates all faces from source person to target, deletes source person",
        "'Merge' button on person detail page",
        "Modal to select person to merge with (dropdown of other people)",
        "Confirmation shows which name will be kept",
        "After merge, redirects to remaining person page",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 29,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-030",
      "title": "Implement face tag removal",
      "description": "As a user, I want to remove a face tag so I can correct mistakes.",
      "acceptanceCriteria": [
        "Delete button on face tag overlay (visible in tagging mode)",
        "Confirmation before deletion",
        "Face record removed, person record preserved",
        "UI updates immediately after deletion",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 30,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-031",
      "title": "Implement date range filter",
      "description": "As a user, I want to filter photos by date range so I can find photos from a specific time.",
      "acceptanceCriteria": [
        "Date range picker in album filter bar",
        "Start date and end date input fields",
        "getPhotos query accepts startDate/endDate params",
        "Filters apply immediately on selection",
        "'Clear' button resets date filter",
        "Filter state preserved in URL params",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 31,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-032",
      "title": "Implement person filter",
      "description": "As a user, I want to filter photos by person so I can find photos of specific people.",
      "acceptanceCriteria": [
        "Person selector dropdown in album filter bar",
        "Shows all people in current album",
        "getPhotos query accepts personId param",
        "Filters to photos containing selected person",
        "Can combine with date filter",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 32,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-033",
      "title": "Implement combined filter UI",
      "description": "As a user, I want to see and manage active filters clearly.",
      "acceptanceCriteria": [
        "Active filters shown as dismissible chips/tags",
        "Each chip has X button to remove that filter",
        "'Clear all filters' button when any filter active",
        "Filter state preserved in URL params (reloadable/shareable)",
        "Empty state message when no photos match filters",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 33,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-034",
      "title": "Implement responsive mobile layout",
      "description": "As a mobile user, I want the app to work well on my phone.",
      "acceptanceCriteria": [
        "All pages usable on 375px+ viewport width",
        "Touch-friendly tap targets (minimum 44px)",
        "Photo grid adapts columns for screen width",
        "Mobile navigation (hamburger menu or bottom nav)",
        "Upload works from mobile camera roll",
        "Lightbox swipe gestures for navigation",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 34,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-035",
      "title": "Deploy to production",
      "description": "As the team, we need to deploy the app so users can access it.",
      "acceptanceCriteria": [
        "Frontend deployed to Vercel",
        "Convex deployed to Convex cloud production",
        "Environment variables configured in Vercel dashboard",
        "UploadThing production keys configured",
        "OAuth redirect URIs updated for production domain",
        "App accessible at production URL without errors",
        "Typecheck passes"
      ],
      "priority": 35,
      "passes": false,
      "notes": ""
    }
  ]
}
